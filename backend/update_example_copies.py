"""
각 유형별 example_copy를 업데이트하는 스크립트
"""
import argparse
from conn import get_supabase_client

# 유형별 예시 원고
EXAMPLE_COPIES = {
    "A": """**[닐라브] 일반 판매 금지 및 의료기기 재분류 공지**
닐라브 질염청결제는 금일부로 '일반 판매 금지'가 결정되었습니다. 그동안 닐라브에 보내주신 관심과 사랑에 깊은 감사를 표하며, 다음과 같은 이유로 일반 소비자 대상 판매가 중지되었음을 알립니다. 단순 세정 효과를 넘어 질 점막에 유산균 보호막을 직접 이식하여 질염 원인균을 99% 박멸하고 재발을 막는 효과가 단순 청결 목적의 일반인이 사용하기에는 성분이 지나치게 강력하고 전문적이라는 판단하에 '치료 목적의 의료기기'로 재분류 처분을 받게 되었습니다. 이에 따라 누구나 구매 가능했던 기존 방식의 일반 판매는 전면 중단됩니다. 저희도 단종 결정에 불복하고 행정 소송까지 갔습니다. 정말 힘든 싸움이었는데 대법원까지 가서야 겨우 다시 팔 수 있게 됐습니다. 근데 조건이 붙었어요. 단종 대신 핵심 성분 함량을 10분의 1로 줄이라는 거였죠. 문제는 함량만 줄어드는 게 아니라는 겁니다. 효과도 솔직히 10분의 1로 줄어들 수밖에 없어요. 이제 2주 만에 눈에 보이던 드라마틱한 효과는 없어지는 거예요. 다행인 건 지금 여러분이 사시는 이 제품이 바로 단종 직전에 생산된 고함량 원버전이라는 겁니다. 소송 때문에 묶여있던 마지막 물량이죠. 하지만 이것도 이제 다음 주 뒤부터는 못 구하게 돼요. 그 뒤로는 저희도 팔고 싶어도 못 팝니다. 법적으로 함량이 조정된 버전만 만들고 팔아야 하거든요. 관심 있으셨던 분들 지금 빨리 쟁여야 해요...""",

    "B": """**[닐라브] 산부인과 반발 및 성분 강제 제한**
너네 그거 들었어? 닐라브 질염 바꼈대.

**[하루미츠] 제약 업계 반발 및 전량 회수/폐기**
3일 후 니코틴 배출제 하루미츠는 전량 회수 후 폐기 조치 예정입니다. 그동안 저희 하루미츠를 믿고 구매해 주신 모든 분들께 진심으로 감사드립니다. 하지만 유감스럽게도 효과가 너무 탁월하다 보니 고가의 금연 치료나 호흡기 진료를 받던 환자 수가 급격히 줄었고, 결국 관련 이익 단체와 제약 업계의 강한 반발을 불러왔습니다. 그 결과 내려온 행정 조치에 따라 기존 고함량 하루미츠는 전량 회수 후 폐기될 예정이며, 3일 뒤부터는 판매 자체가 전면 금지됩니다. 저희는 마지막으로 하루미츠를 꼭 필요로 하셨던 분들께 작은 보답의 의미로 마진 없는 원가 판매 링크를 남깁니다. 이 기회 이후에는 더 이상 국내에서 정품 하루미츠를 만나보실 수 없으며, 가격이 3배 이상 비싼 해외 직구를 통해서만 구매하실 수 있습니다.""",

    "C": """**[탈모 앰플] 남성용 고함량 앰플의 여성 구매 제한**
여자가 바르면 3만모 이상 자라버린다는 남성용 탈모 앰플 결국 다음 주부터 성별 인증받고 판다. 이게 원래 두피 속 죽은 모유두세포까지 영양분을 강제로 밀어넣어 주는 원리다. 근데 남성용 제품은 모유두세포가 완전 괴사해버린 환자 전용으로 나온 거라 발모 유도 특허 성분이 여성용보다 훨씬 고함량으로 들어있음. 근데 여자들은 남자들처럼 모공이 아예 막힌 게 아니라 정수리만 비어있는 거라 세포 반응 속도가 평균 3배는 빠르다. 그래서 여자가 고함량인 남성용을 찌르면 모발이 과하게 빨리 자라 버리게 되는 거다. 다시 말해 남자가 이걸 찌르면 정수리만 좀 채워지겠지만 여자가 이걸 찌르면 온 두피의 모근이랑 잔머리가 동시에 폭발하면서 남자가 썼을 때보다 정수리가 더 새까매지고 그만큼 더 빽빽하게 자라게 되는 거다.

**[미스블랙] 가발 같아 보일 정도로 새까매짐 주의**
다시 한번 말씀드리지만 고작 새치 몇 가닥 가리는 미용 목적으로는 권장해 드리지 않습니다. 괜히 호기심으로 먹었다가 머리가 너무 새까매져서 오히려 가발 같아 보일 수 있어요.

**[하루미츠] 10년 이상 꼴초 아니면 절대 금지**
미리 경고할게요. 욕심내서 하루에 세 번씩 먹지 마세요. 비흡연자 폐로 되돌아가서 호흡이 너무 편해져 적응이 안 된다는 분들 너무 많습니다. 숨 쉬는 게 어색할까 봐 걱정되신다면 제발 정량만 지키세요. 딱 2주만 먹으면 아무리 새까맣던 폐도 신생아처럼 말도 안 되게 깨끗해져요. 그 정도로 니코틴 배출 효과가 엄청납니다.

**[포레비타] 잇몸 조임 압박감 주의**
딱 3일만 뿌리면 시궁창 같던 입냄새가 사라지다 못해 잇몸이 꽉 차올라요. 그 정도로 썩은 염증이 빠르게 사라집니다. 단순히 구취 정도만 잡고 싶은 분들은 쓰지 마세요. 잇몸이 비정상적으로 차오르니까요. 이게 요즘 '잇몸 재생 스프레이'라고 별명까지 있을 정도로 잇몸 필러 7cc랑 잇몸 재건술 5회와 동일한 효과를 가져온 유산균 스프레이인데, 저희 와이프가 3주 만에 하수구 같던 입냄새 사라지고 내려앉은 잇몸이 7mm 다시 차올랐어요.""",

    "D": """**[탈모 앰플] 의사 면허 반납 및 온라인 판매 승인 서사**
정수리가 휑하고 머리가 빠지는 여성 탈모로는 탈모 클리닉 절대 오지 마세요. 다들 모발 이식까지는 하기 싫으시잖아요. 사실 집에서 이것만 쓰면 병원 오실 일이 전혀 없어요. 오늘부터 두피에 이거 찌르시기만 하면 2주 뒤에 정수리 빽빽해져 있어요. 다른 건 다 필요 없어요. 만약 이걸로 안 되면 제가 면허 반납할게요. 제가 실제 저희 환자분들 그냥 집에서 이걸로 풍성하게 머리 자라서 다들 모발 이식 예약까지 다 취소하더라고요. 이게 뭐냐면 앰플 끝에 미세 니들이 달린 엑소좀 탈모 앰플이에요. 이게 실제 임상 데이터로 결론부터 얘기하면 딱 한 번만 사용해도 모낭을 복제해버려서 4주에 6,000모가 자라요. 이게 PDRN 주사 5회에 PRP 주사 5회 맞는 효과를 구현하는 거예요. 정말 효과가 미친 거죠. 저는 물론이고 제 가족에게도 저는 이거 무조건 추천하는데 이게 원래 처방을 받아야지만 살 수 있었던 게 이번에 온라인 판매 승인 허가 나면서 쉽게 살 수 있게 됐어요.

**[하루미츠] 서울의학TV 금연하지 말고 배출해라**
저는 솔직히 주변에 흡연자분들에게 금연하지 말라고 해요. 왜냐하면 이게 금연이 문제가 아니에요. 순서가 완전히 잘못됐어요. 이게 실제 흡연자분들 폐를 보면요, 끈적하고 딱딱한 니코틴이 막 덕지덕지 붙어있어요. 제가 실제 데이터로 보면 3개월 섭취했을 때 폐 속 니코틴이 82%가 배출돼요. 전 그래서 직접 여러 개 사서 주변에 많이 선물로 주거든요? 2주만 지나도 기침, 가래가 싹 없어졌대요 다들. 한 명도 효과를 못 본 사람이 없어요 정말.

**[아이틱스] 13년 차 연구원의 실명 경고 및 수술 전 권유**
눈 앞에 날파리 아지랑이가 보이면요 이미 실명이 코앞으로 다가왔다는 신호입니다. 노화로 인해 유리체에 찌꺼기가 쌓여 발생하는 비문증은 자연 치유가 절대 안 돼요. 찌꺼기는 한 번 생기기 시작하면 점점 걷잡을 수 없어져서 결국 망막이 찢어지는 망막열공 망막박리를 유발해 실명에 이를 수도 있다는 사실. 이때 필요한 게 바로 유리체 찌꺼기를 디톡스하는 것이에요. 루테인 지아잔틴 아스타잔틴을 황금비율로 배합한 비문복합물 아이가 유리체 속 수십년 간 묵은 찌꺼기를 싹 녹여주는 원리거든요. 먹는 순간 시야를 가리던 부유물들이 싹 사라집니다. 진짜 지금 제가 이쪽 연구만 13년 차고요 수술 고민하는 분들한테 가장 먼저 권하는 게 이거예요. 그 정도로 확실합니다. 그냥 일주일만 먹어 봐도 다 알아요. 수술 얘기 나오기 전에 이걸로 비문 디톡스 먼저 해보세요. 눈 앞 날파리 싹 사라져요.""",

    "E": """**[포레비타] 잇몸 재생 전재산 보장 서사**
이거 뿌리고도 잇몸 그대로면 제가 전재산 드리겠습니다. 한 번만 뿌려도 잇몸 5mm 차오르니까 써본 사람들 사이에서는 답일 수밖에 없습니다. 첫 번째 이유는 효과입니다. 잇몸 틈새 염증균을 99.9% 박멸하고 하니까 가격이 저렴할 때 구매해 보세요. 먹으면 진짜 달라집니다.

**[하루미츠] 10년 이상 흡연자 폐암 확률 및 환불 보장**
10년 이상 흡연자 중 기침이 나온다면 폐암 확정입니다. 임상 데이터로 보면 기침을 하는 흡연자의 경우 3년 이내 폐암에 걸릴 확률이 무려 80%라고 합니다. 마른기침의 주원인은 오랜 흡연으로 인한 니코틴 찌꺼기이며, 이 니코틴은 금연을 아무리 오래 해도 절대 자연적으로 배출되지 않고 딱딱하게 굳어 폐암을 유발합니다. 그래서 흡연하는 의사들은 니코틴 배출제를 복용합니다. 세계 최초 특허 니코틴 배출 성분이 초고함량 들어있어, 단 일주일 만에 니코틴을 97% 배출합니다. 실제 임상 데이터에서도 2주 섭취한 실험자가 건강검진에서 비흡연자 폐 진단을 받을 정도로 효과는 의심할 필요 없습니다. 효과 없으면 100% 환불까지 해준다고 하니 10년 이상 흡연자라면 지금 바로 폐암 예방하세요!""",

    "F": """**[미스블랙] 40대 여성 전용 새치 유산균**
흰머리가 나기 시작했다면 '이것'만 기억하세요! 아직 40대인데.. 멀리서 보면 할머니? 흰머리는 노안의 1순위 원인이라는 사실. 하지만 당신은 이제부터 평생 검은 머리만 자랄 수 있습니다. 바로 새치 유산균 '미스블랙'. 40대 여성 흰머리는 단순 흰머리와는 다릅니다. 진짜 원인은 갑작스러운 노화로 인한 멜라닌 색소의 급격한 감소 때문이라는 점. 이 원인을 정확히 알아낸 국내 연구진이 해결책으로 개발한 40대 여성 전용 새치 유산균, 미스블랙입니다. 한 포에 든 50억 마리 역노화 유산균과 특허 성분 멜라밸런스, 도파에스트로가 이미 사라진 멜라닌까지 다시 복구하는데 이 한 포면 끝이에요. 완전 백발 같던 흰머리도 단 2주 만에 뿌리부터 까맣게 올라온다는 미스블랙. 이 영상 보고 구매하시는 오직 20명에게만 연말 특가 3+2, 34% 할인 혜택으로 제공. 여러 개 구매하셔서 새해에는 자신감 되찾으세요!

**[미스블랙] 40대 남성의 여성용 유산균 오용/비화**
40대 남성 대부분이 모르는 여성용 새치 유산균의 비밀! 아직 43세인데 흰머리 때문에 또래보다 20년 늙어 보이던 제가 이거 먹고 단 일주일 만에 회춘했어요. 바로 '중년 여성 전용' 새치 유산균입니다. 남성 흰머리는 단순 노화지만, 여성 흰머리는 노화와 갱년기 영향을 동시에 받는 '호르몬 새치'라는 점. 따라서 멜라닌 재생, 생성균 함량이 남성보다 10배 이상으로 설계해야만 효과를 볼 수 있어요. 그런 고함량 제품을 남성이 복용하면 효과가 10배 빠르게 나타나요!

**[아이틱스] 비문증 증상 공감(날파리/지렁이) 후기**
비문증인데 노안인 줄 아는 사람 특. 1. 시선에 따라 지렁이가 둥둥 떠다님. 2. 흐린 날엔 아예 시야가 번짐. 3. 눈영양제 챙겨먹어도 눈피로감이 똑같음. 나 눈앞에 점, 실, 날파리 같은 거 떠다닌 지 몇 년 됐음. 처음엔 그냥 먼지인 줄 알고 눈만 비비고 다녔음. 근데 나중엔 계속 보이니까 너무 스트레스 받더라. 병원도 소용없고 레이저도 무섭고 부작용이 심하대서 걍 방치함. 근데 약사 친구가 아이틱스 추천해 줌. 비문증 개선 성분으로 특허까지 땄다길래 하루 한 알이니까 속는 셈 치고 먹어봄. 와 2주 됐는데 눈 앞이 개운해지더니 한 달 지나니까 걍 싹 사라짐. 심지어 나는 정가에 샀는데 지금은 34% 할인 중임. 눈날파리 보이는 사람은 꼭 써봐. 완전 인생템임.""",

    "G": """**[미스블랙] 164% 개선 임상 결과 및 후기 1000건**
새치를 먹어서 해결한다고? 새치가 나는 원인을 알면 가능합니다. 새치의 원인은 멜라닌 색소 분비 저하입니다. 이를 위해 개발된 '미스블랙'은 멜라밸런스 특허 성분으로 두피 환경을 개선하도록 설계됐습니다. 뿌리에서 자라나는 검은 모발 비율이 최대 164%까지 개선되었고, 꾸준히 섭취 시 뿌리에서 검은 머리가 다시 자랍니다. 출시하자마자 후기만 1,000건 달린 미스블랙! 지금 이 링크에서 34% 할인으로 뿌리부터 달라지는 변화를 시작해 보세요.""",
}

# 유형 코드 -> ID 매핑
TYPE_IDS = {
    "A": "8b2394bc-2d9b-43cb-aabb-5acfab8e4b15",
    "B": "a0d64e71-2e20-41a3-a450-a15cf9b02fff",
    "C": "cad8087e-3ed1-47bb-b4e0-28174f3fd8cd",
    "D": "42f87da4-062f-476f-a2d6-74e3c3be4ca8",
    "E": "dbef2959-e78f-434f-96ba-49facadd960e",
    "F": "9e3ce1cd-1fc1-4b1b-8802-1765de238aa1",
    "G": "19acfe1a-3709-4f26-ba0e-593e99841c52",
}


def update_example_copies():
    client = get_supabase_client()

    for code, example_copy in EXAMPLE_COPIES.items():
        type_id = TYPE_IDS[code]
        print(f"Updating Type {code} ({type_id})...")

        response = client.table("copy_types").update({
            "example_copy": example_copy
        }).eq("id", type_id).execute()

        print(f"  -> Updated: {len(response.data)} row(s)")

    print("\nAll example copies updated successfully!")


def main():
    parser = argparse.ArgumentParser(description="Update example copies for all copy types")
    parser.add_argument("--dry-run", action="store_true", help="Print SQL without executing")
    args = parser.parse_args()

    if args.dry_run:
        print("=== DRY RUN: SQL statements ===\n")
        for code, example_copy in EXAMPLE_COPIES.items():
            type_id = TYPE_IDS[code]
            # Escape single quotes for SQL
            escaped = example_copy.replace("'", "''")
            print(f"-- Type {code}")
            print(f"UPDATE copy_types SET example_copy = '{escaped}' WHERE id = '{type_id}';")
            print()
    else:
        update_example_copies()


if __name__ == "__main__":
    main()
